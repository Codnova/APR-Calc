<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>APR Live Principal</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;800&display=swap" rel="stylesheet">
        <style>
        :root {
            --bg-1: #0B1221;
            --bg-2: #0F1C3A;
            --grad-1: #6E6BF1;
            --grad-2: #35D0FF;
            --text: #E6EAF2;
            --muted: #A7B0C0;
            --card: rgba(255,255,255,0.06);
            --border: rgba(255,255,255,0.12);
            --ring: rgba(110,107,241,0.55);
            --radius: 16px;
            --shadow-1: 0 12px 40px rgba(0,0,0,0.45);
        }
        *, *::before, *::after { box-sizing: border-box; }
        body {
            min-height: 100vh;
            margin: 0;
            display: flex;
            align-items: flex-start;
            justify-content: center;
            padding: 40px 16px;
            background:
                radial-gradient(1200px 500px at 10% 0%, rgba(110,107,241,0.35), transparent 60%),
                radial-gradient(1000px 600px at 90% 0%, rgba(53,208,255,0.28), transparent 60%),
                linear-gradient(180deg, var(--bg-1), var(--bg-2));
            color: var(--text);
            font-family: 'Inter', Arial, sans-serif;
        }
        .center-card {
            width: 100%;
            max-width: 1100px;
            display: flex;
            flex-direction: column;
            align-items: stretch;
            gap: 16px;
        }
        .two-col {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 0.8rem 1rem;
            width: 100%;
            max-width: 980px;
        }
        .app-header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 0.4rem;
            margin-bottom: 0.6rem;
            text-align: center;
        }
        .app-title {
            font-size: 2.2rem;
            font-weight: 800;
            letter-spacing: 0.02em;
            background: linear-gradient(90deg, var(--grad-1), var(--grad-2));
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            margin: 0.3rem 0 0;
        }
        .app-subtitle { color: var(--muted); font-size: 0.98rem; margin: 0 0 0.6rem; }
        .input-group {
            background: var(--card);
            border-radius: var(--radius);
            padding: 28px 28px 24px;
            margin-bottom: 12px;
            box-shadow: var(--shadow-1);
            display: grid;
            grid-template-columns: 1fr;
            gap: 16px;
            border: 1px solid var(--border);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
        }
        .section-card {
            background: rgba(255,255,255,0.03);
            border: 1px solid var(--border);
            border-radius: 14px;
            padding: 18px 16px 14px;
        }
        .section-title {
            font-weight: 800;
            font-size: 0.95rem;
            letter-spacing: 0.06em;
            text-transform: uppercase;
            color: var(--text);
            margin: 0 0 10px;
            opacity: 0.95;
        }
        .section-grid {
            display: grid;
            grid-template-columns: repeat(2, minmax(0, 1fr));
            gap: 12px 16px;
            width: 100%;
        }
        label {
            color: var(--muted);
            font-size: 0.9rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
            text-align: left;
            text-transform: uppercase;
            letter-spacing: 0.04em;
        }
        .input-row {
            display: flex;
            flex-direction: column;
            align-items: stretch;
            width: 100%;
            margin-bottom: 4px;
            gap: 8px;
            min-width: 0; /* allow shrinking inside grid */
        }
        .inline-row { display: grid; grid-template-columns: 1fr 1fr; gap: 0.6rem; width: 100%; align-items: center; }
        input[type="number"], select, textarea {
            width: 100%;
            padding: 0.9rem 1rem;
            border-radius: 12px;
            border: 1px solid var(--border);
            font-size: 1rem;
            background: rgba(255,255,255,0.03);
            color: var(--text);
            outline: none;
            transition: box-shadow 0.2s, border-color 0.2s, background 0.2s;
            text-align: left;
            min-height: 42px;
        }
        input[type="number"]:focus, select:focus, textarea:focus { border-color: var(--ring); box-shadow: 0 0 0 3px rgba(110,107,241,0.25); background: rgba(255,255,255,0.06); }
        textarea { resize: vertical; min-height: 84px; }
        .small-text { color: var(--muted); font-size: 0.95rem; margin-top: 0.3rem; text-align: left; }
        /* Remove number input arrows */
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
        input[type=number] { appearance: textfield; -webkit-appearance: none; -moz-appearance: textfield; }
        button {
            width: 100%;
            padding: 0.9rem 1rem;
            font-size: 1rem;
            font-weight: 700;
            border: 1px solid var(--border);
            border-radius: 12px;
            background: rgba(255,255,255,0.04);
            color: var(--text);
            cursor: pointer;
            margin-top: 0.4rem;
            margin-bottom: 0.2rem;
            transition: background 0.2s, color 0.2s, border-color 0.2s, transform 0.05s;
        }
        button:hover { background: rgba(255,255,255,0.08); border-color: var(--ring); }
        button:active { transform: translateY(1px); }
        button:disabled { opacity: 0.5; cursor: not-allowed; }
        #start { background: linear-gradient(90deg, var(--grad-1), var(--grad-2)); color: #0a0f1d; border: none; box-shadow: 0 8px 30px rgba(53,208,255,0.25); }
        #start:hover { filter: brightness(1.08); }
        #stop { background: rgba(255,255,255,0.06); color: var(--text); }
        .principal-label { color: var(--muted); font-size: 1.1rem; font-weight: 600; margin-bottom: 0.5rem; text-align: center; }
        .principal-value { font-size: 3.2rem; font-weight: 700; color: var(--text); letter-spacing: 0.05em; text-align: center; margin-bottom: 0.5rem; text-shadow: 0 2px 16px rgba(0,0,0,0.22); }
        .apr-label { color: var(--muted); font-size: 1.2rem; font-weight: 600; text-align: center; margin-bottom: 0.5rem; }
        .stats-grid { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 1rem; width: 100%; max-width: 820px; margin-top: 0.6rem; }
        .stat-card { background: var(--card); border: 1px solid var(--border); border-radius: 14px; padding: 1rem 1.2rem; backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px); box-shadow: var(--shadow-1); }
        .stat-label { color: var(--muted); font-size: 0.95rem; font-weight: 600; text-align: center; margin-bottom: 0.2rem; }
        .stat-value { color: var(--text); font-size: 1.35rem; font-weight: 800; text-align: center; margin-bottom: 0.1rem; text-shadow: 0 2px 16px rgba(0,0,0,0.18); letter-spacing: 0.02em; }
        .button-row { display: grid; grid-template-columns: repeat(2, minmax(0, 1fr)); gap: 0.6rem; width: 100%; max-width: 820px; margin-top: 0.8rem; }
        .go-back-btn { background: rgba(255,255,255,0.04); color: var(--text); border: 1px solid var(--border); }
        .go-back-btn:hover { border-color: var(--ring); }
        [data-horizon] { background: rgba(255,255,255,0.03); border: 1px dashed var(--border); }
        [data-horizon]:hover { border-color: var(--ring); background: rgba(255,255,255,0.08); }
        @media (max-width: 600px) {
            .input-group { padding: 1.2rem 1rem 1rem 1rem; min-width: 0; }
            .principal-value { font-size: 2.2rem; }
            .apr-label { font-size: 1.05rem; }
            input[type="number"] { font-size: 1.05rem; }
            .stats-grid { grid-template-columns: 1fr; }
            .two-col, .inline-row, .section-grid { grid-template-columns: 1fr; }
        }
    </style>
    <link rel="manifest" href="manifest.json">
</head>
<body>
    <div class="center-card">
        <header class="app-header">
            <h1 class="app-title">APR Live Principal</h1>
            <p class="app-subtitle">Watch your balance grow in real time</p>
        </header>
        <form id="apr-form" class="input-group" autocomplete="off">
            <div class="section-card">
                <h3 class="section-title">Basics</h3>
                <div class="section-grid">
                    <div class="input-row">
                        <label for="amount">Initial Amount</label>
                        <input type="number" id="amount" min="0" step="0.0001" value="7603.85" required aria-required="true" />
                    </div>
                    <div class="input-row">
                        <label for="currency">Currency</label>
                        <select id="currency">
                            <option value="USD" selected>USD</option>
                            <option value="EUR">EUR</option>
                            <option value="GBP">GBP</option>
                        </select>
                    </div>
                    <div class="input-row">
                        <label for="rate">APR (%)</label>
                        <input type="number" id="rate" min="0" step="0.01" value="2.78" required aria-required="true" />
                    </div>
                    <div class="input-row">
                        <label for="compounding">Compounding</label>
                        <select id="compounding">
                            <option value="continuous">Continuous</option>
                            <option value="daily">Daily</option>
                            <option value="weekly">Weekly</option>
                            <option value="monthly" selected>Monthly</option>
                            <option value="quarterly">Quarterly</option>
                            <option value="yearly">Yearly</option>
                        </select>
                        <div class="small-text" id="apyDisplay">APY: 0.00%</div>
                    </div>
                    <div class="input-row">
                        <label for="inflationRate">Inflation (%)</label>
                        <input type="number" id="inflationRate" min="0" step="0.01" value="0" />
                        <div class="small-text"><input type="checkbox" id="showReal"> Show real (inflation-adjusted)</div>
                    </div>
                </div>
            </div>

            <div class="section-card">
                <h3 class="section-title">Cash Flows</h3>
                <div class="section-grid">
                    <div class="input-row">
                        <label for="contributionAmount">Recurring Contribution</label>
                        <input type="number" id="contributionAmount" min="0" step="0.01" value="0" />
                        <div class="inline-row">
                            <label for="contributionFrequency">Frequency</label>
                            <select id="contributionFrequency">
                                <option value="none" selected>None</option>
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                    </div>
                    <div class="input-row">
                        <label for="withdrawAmount">Recurring Withdrawal</label>
                        <input type="number" id="withdrawAmount" min="0" step="0.01" value="0" />
                        <div class="inline-row">
                            <label for="withdrawFrequency">Frequency</label>
                            <select id="withdrawFrequency">
                                <option value="none" selected>None</option>
                                <option value="daily">Daily</option>
                                <option value="weekly">Weekly</option>
                                <option value="monthly">Monthly</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <div class="section-card">
                <h3 class="section-title">Fees & Taxes</h3>
                <div class="section-grid">
                    <div class="input-row">
                        <label for="managementFee">Management Fee (%/yr)</label>
                        <input type="number" id="managementFee" min="0" step="0.01" value="0" />
                    </div>
                    <div class="input-row">
                        <label for="performanceFee">Performance Fee (% of profit)</label>
                        <input type="number" id="performanceFee" min="0" step="0.01" value="0" />
                    </div>
                    <div class="input-row">
                        <label for="taxRate">Tax Rate (% of profit)</label>
                        <input type="number" id="taxRate" min="0" step="0.01" value="0" />
                    </div>
                </div>
            </div>

            <div class="section-card">
                <h3 class="section-title">Horizon & Schedule</h3>
                <div class="section-grid">
                    <div class="input-row">
                        <label>Horizon presets</label>
                        <div class="inline-row" style="grid-template-columns: repeat(5, minmax(0, 1fr));">
                            <button type="button" class="go-back-btn" data-horizon="1">1d</button>
                            <button type="button" class="go-back-btn" data-horizon="7">1w</button>
                            <button type="button" class="go-back-btn" data-horizon="30">1m</button>
                            <button type="button" class="go-back-btn" data-horizon="365">1y</button>
                            <button type="button" class="go-back-btn" data-horizon="1825">5y</button>
                        </div>
                        <div class="inline-row">
                            <label for="customDays">Custom (days)</label>
                            <input type="number" id="customDays" min="1" step="1" value="365" />
                        </div>
                    </div>
                    <div class="input-row">
                        <label for="aprSchedule">Variable APR schedule (monthOffset,APR% per line)</label>
                        <textarea id="aprSchedule" placeholder="0,2.8\n6,3.2\n12,2.1"></textarea>
                        <div class="small-text">Leave empty for constant APR.</div>
                    </div>
                </div>
            </div>

            <div class="section-card">
                <h3 class="section-title">Goals & Scenarios</h3>
                <div class="section-grid">
                    <div class="input-row">
                        <label for="targetBalance">Goal Seek</label>
                        <input type="number" id="targetBalance" min="0" step="0.01" value="0" />
                        <div class="inline-row">
                            <label for="goalVariable">Solve for</label>
                            <select id="goalVariable">
                                <option value="time" selected>Time</option>
                                <option value="apr">APR</option>
                                <option value="contribution">Contribution</option>
                            </select>
                        </div>
                        <button type="button" id="goalSolve">Solve</button>
                        <div class="small-text" id="goalResult"></div>
                    </div>
                    <div class="input-row">
                        <label for="scenarioName">Scenarios</label>
                        <input type="text" id="scenarioName" placeholder="Scenario name" />
                        <div class="inline-row">
                            <button type="button" id="saveScenario">Save</button>
                            <button type="button" id="deleteScenario">Delete</button>
                        </div>
                        <select id="scenarioList" multiple style="width:100%; height:120px;"></select>
                        <div class="inline-row">
                            <button type="button" id="loadScenario">Load</button>
                            <button type="button" id="compareSelected">Compare</button>
                        </div>
                    </div>
                </div>
            </div>

            <button type="button" id="start">Start</button>
            <button type="button" id="stop" disabled>Stop</button>
        </form>
        <div id="display" style="display:none; flex-direction:column; align-items:center;">
            <div class="principal-label">Real Time Value</div>
            <div class="principal-value" id="principal" aria-live="polite">$0.0000</div>
            <div class="apr-label" id="aprDisplay" aria-live="polite">Earning 0.00% APR</div>

            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-label">Expected Profit After 1 Year</div>
                    <div class="stat-value" id="profitYear" aria-live="polite">$0.0000</div>
                </div>
                <div class="stat-card">
                    <div class="stat-label">Profit Per Day</div>
                    <div class="stat-value" id="profitDay" aria-live="polite">$0.0000</div>
                </div>
            </div>

            <div style="width:100%; max-width:820px; margin-top:1rem;">
                <canvas id="balanceChart" height="220" aria-label="Balance chart" role="img"></canvas>
            </div>

            <div class="button-row">
                <button type="button" class="go-back-btn" id="exportCsv">Export CSV</button>
                <button type="button" class="go-back-btn" id="shareLink">Share Link</button>
            </div>

            <div class="inline-row" style="max-width:560px; margin-top:0.6rem; grid-template-columns: 1fr 2fr;">
                <label for="sensitivityRange">Sensitivity ± APR (pp)</label>
                <input type="number" id="sensitivityRange" min="0" step="0.1" value="0.5" />
            </div>
            <div class="small-text"><input type="checkbox" id="showSensitivity"> Show sensitivity band</div>

            <div class="button-row">
                <button type="button" class="go-back-btn" id="goBack">Edit Inputs</button>
                <button type="button" class="go-back-btn" id="reset">Reset</button>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="script.js"></script>
</body>
</html>


